# 属性预设制作指南

## 基本格式

属性预设是一个 JSON 对象，包含以下字段：

```json
{
  "format": "acu_attr_preset_v1",
  "version": 1,
  "id": "your_preset_id",
  "name": "预设名称",
  "builtin": false,
  "description": "预设描述",
  "baseAttributes": [...],
  "specialAttributes": [...]
}
```

## 制作步骤

1. **打开设置面板** → 属性规则 → 管理规则预设 → 新建预设
2. **填写基本信息**：预设名称、描述
3. **编辑 JSON 配置**：
   - `baseAttributes`: 基本属性数组
   - `specialAttributes`: 特殊属性数组
4. **保存**

## 属性定义

### 基本属性（baseAttributes）

```json
{
  "name": "力量",
  "formula": "3d6*5",
  "range": [15, 90],
  "modifier": "1d10-5"  // 可选
}
```

### 特殊属性（specialAttributes）

```json
{
  "name": "侦查",
  "formula": "10+5d20",
  "range": [15, 95]  // 可选
}
```

**公式计算**（可引用基本属性）：

```json
{
  "name": "闪避",
  "formula": "敏捷/2",
  "range": [1, 99]
}
```

## 公式语法

- **基础骰子**: `3d6` (投3个6面骰)
- **高级语法**:
  - `4d6dl1` (4d6丢弃最低1个)
  - `4d6kh3` (4d6保留最高3个)
  - `4d6kl2` (4d6保留最低2个)
  - `4d6dh1` (4d6去掉最高1个)
- **数学运算**: `+`, `-`, `*`, `/`
- **变量引用**: `力量/2`, `敏捷+5`
- **多骰叠加**: `10+5d20` (长尾分布)

## 注意事项

### 1. 长尾分布 + 极端值

- **目标**: 平均值较低，但上下限差距大（允许极端值）
- **实现**: 使用多个小骰子叠加，如 `10+5d20` 而不是 `1d100`
- **示例**:
  - ✅ `10+5d20` → 范围 15-110，平均 60.5（长尾+极端）
  - ❌ `50+1d50` → 范围 51-100，平均 75.5（分布集中）

### 2. 数量控制（移动端友好）

- **基本属性**: 建议 4-8 个（DND=6, COC=8）
- **特殊属性**: 建议 8-16 个（DND=8, COC=16）
- **总数量**: 不超过 24 个（太多手机操作困难）
- **优先级**: 保留核心、常用、有特色的技能

### 3. 特色与特点

- **规则书特色**: 如 COC 的 SAN值、克苏鲁神话
- **世界观相关**: 符合规则设定的独特机制
- **避免冗余**: 不添加实际跑团中不常用的属性

### 4. 数值范围

- **基本属性**: 范围应与规则书一致（COC: 15-90, DND: 3-18）
- **特殊属性**: 根据使用频率分层（高频40-80，中频30-60，低频10-40）
- **range 字段**: 用于限制极值，但不强制（实际值可能超出）

### 5. 公式设计建议

```
高频核心技能: 10+5d20  → 15-110, 平均60
中频常用技能: 5+4d20   → 9-85, 平均47
低频辅助技能: 5+3d20   → 8-65, 平均36
极低稀有技能: 1+2d20   → 3-41, 平均22
```

## 示例参考

参考内置预设：`简化COC规则` 和 `简化DND规则` 的 JSON 配置。

## 导入/导出

- **导出**: 预设管理面板 → 导出按钮 → 保存 JSON 文件
- **导入**: 预设管理面板 → 导入按钮 → 选择 JSON 文件

## 测试建议

1. 生成属性多次，检查数值分布是否合理
2. 在移动端测试，确保按钮数量合适
3. 实际游玩测试，验证是否实用
