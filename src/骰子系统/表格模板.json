{
  "sheet_global_data": {
    "uid": "sheet_global_data",
    "name": "全局数据表",
    "sourceData": {
      "note": "记录当前世界的核心宏观状态。此表有且仅有一行。禁止增删行\n\n【层级定义】\n层级: 主要地区 > 次要地区 > 详细地点\n示例: 东京都 > 新宿区 > 御苑\n\n【详细地点格式】\n仅填写地点名称本身，不包含层级结构\n正确: \"{{user}}公寓\" | \"御苑\" | \"学校\"\n错误: \"东京-{{user}}公寓-卫生间\" | \"新宿区-御苑\"\n当前详细地点必须等于世界地图点表中某个\"详细地点\"的值\n\n【时间格式】\n当前时间格式: \"YYYY-MM-DD HH:MM\"\n经过的时间格式: \"{数值}{单位}\"，多单位用空格连接\n单位: [纪元,千年,百年,年,月,周,天,小时,分]\n示例: \"3小时20分\" | \"2天\" | \"3年6月\" | \"2纪元\"\n约束: 当前时间 = 上轮场景时间 + 经过的时间\n\n【主要地区切换流程】\n触发: 当前主要地区变更时\n步骤: ①更新本表\"当前主要地区\"→ ②清空世界地图点表 → ③填入新主要地区的次要地区 → ④更新\"当前次要地区\"→ ⑤更新 \"当前详细地点\" → ⑥清空地图元素表 → ⑦更新主角\"所在地点\" → ⑧填充新地图元素 → ⑨更新重要人物表\"在场状态\"\n\n【次要地区切换流程】\n触发: 当前次要地区变更时\n步骤: ①更新本表\"当前次要地区\" → ②更新主角\"所在地点\" → ③清空并重填地图元素表 → ④更新重要人物表\"在场状态\"\n\n【详细地点切换流程】\n触发: 当前详细地点变更时\n步骤: ①更新主角\"所在地点\" → ②清空并重填地图元素表 → ③更新重要人物表\"在场状态\"\n\n【一致性校验】\n- 当前详细地点 = 世界地图点表.详细地点（精准匹配地图点表任一行的详细地点）\n- 当前主要地区 ∈ 世界地图点表.所有行.主要地区",
      "initNode": "插入一条记录，设定初始时间和位置。",
      "deleteNode": "禁止。",
      "updateNode": "- 每轮必须更新: 上轮场景时间,经过的时间,当前时间。\n- 位置变化时更新对应字段。",
      "insertNode": "禁止。"
    },
    "content": [[null, "当前主要地区", "当前次要地区", "当前详细地点", "上轮场景时间", "经过的时间", "当前时间"]],
    "updateConfig": {
      "uiSentinel": -1,
      "contextDepth": -1,
      "updateFrequency": -1,
      "batchSize": -1,
      "skipFloors": -1
    },
    "exportConfig": {
      "enabled": false,
      "splitByRow": false,
      "entryName": "全局数据表",
      "entryType": "constant",
      "keywords": "",
      "preventRecursion": true,
      "injectionTemplate": ""
    },
    "orderNo": 0
  },
  "sheet_world_map": {
    "uid": "sheet_world_map",
    "name": "世界地图点",
    "sourceData": {
      "note": "记录当前主要地区内的次要地区及详细地点。\n\n【详细地点格式】\n仅填写地点名称本身，不包含层级结构\n正确: \"{{user}}公寓\" | \"御苑\" | \"学校\"\n错误: \"东京-{{user}}公寓-卫生间\" | \"新宿区-御苑\" | \"{{user}}公寓-客厅\"\n\n【约束】\n- 主要地区引用自全局数据表.当前主要地区\n- 主要地区切换时清空本表并重新填充\n- 详细地点总数≤20条，详细地点要满足MECE\n- 详细地点值必须唯一，作为其他表\"所在地点\"的匹配依据\n- 必须保证重要人物表中所有角色的\"所在地点\"都在本表中存在（精准匹配）\n- 必须保证主角信息表中的\"所在地点\"在本表中存在（精准匹配）\n- 必须保证地图元素表中所有元素的\"所在地点\"都在本表中存在（精准匹配）\n\n【字段说明】\n地点类型: [住宅,学校,遗迹,地牢,交通,特殊]\n重要度: [核心,重要,普通]\n探索状态: [未探索,部分探索,已探索]\n环境描述: ≤30字",
      "initNode": "为当前主要地区插入至少3个详细地点条目。必须包含：①主角信息表中的\"所在地点\" ②重要人物表中所有角色的\"所在地点\"（如果这些地点属于当前主要地区） ③地图元素表中所有元素的\"所在地点\"（如果这些元素属于当前主要地区）。",
      "deleteNode": "触发条件: ①主要地区切换时清空本表 ②条数超过20条时删除重要度最低的（但必须保留重要人物表、主角信息表、地图元素表中正在使用的地点）",
      "updateNode": "触发条件: ①探索状态变化 ②重要度变化 ③环境变化 ④发现现有条目存在空白字段时",
      "insertNode": "触发条件: ①主角到达新地点 ②NPC提及新地点 ③剧情揭示新区域 ④地图或文献发现 ⑤重要人物表新增角色且其\"所在地点\"不在本表中 ⑥地图元素表新增元素且其\"所在地点\"不在本表中"
    },
    "content": [[null, "详细地点", "次要地区", "地点类型", "环境描述", "重要度", "探索状态"]],
    "updateConfig": {
      "uiSentinel": -1,
      "contextDepth": -1,
      "updateFrequency": -1,
      "batchSize": -1,
      "skipFloors": -1
    },
    "exportConfig": {
      "enabled": false,
      "splitByRow": false,
      "entryName": "世界地图点",
      "entryType": "constant",
      "keywords": "",
      "preventRecursion": true,
      "injectionTemplate": ""
    },
    "orderNo": 1
  },
  "sheet_map_elements": {
    "uid": "sheet_map_elements",
    "name": "地图元素表",
    "sourceData": {
      "note": "记录当前次要地区内的可交互非角色实体。\n\n【准入规则】\n录入条件(OR): [与剧情发展相关,具有交互价值,体现环境特色]\n元素类型: [怪物,龙套,物品,机关,装置,环境物,痕迹]\n- 环境物: 体现场景氛围或特色的元素，如\"落地窗外的城市夜景\"\"墙上的老照片\"\n- 痕迹: 可供调查的线索或痕迹\n【禁入】: [有姓名且会多次出现的重要NPC]\n\n【龙套说明】\n定义: 无名或仅有职能称呼的一次性人物\n示例: \"警卫\"\"店员\"\"路人甲\"\"村民\"\n判定: 无独立背景 AND 不影响主线 AND 不会反复登场\n边界: 若龙套后续变得重要 → 移入重要人物表并从本表删除\n\n【所在地点规则】\n所在地点必须等于世界地图点表中某个\"详细地点\"的值（精准匹配）\n仅填写地点名称本身，不包含层级结构\n\n【条数约束】\n- 每个详细地点的元素数: 1-5条\n- 全表总数≤30条\n- 次要地区切换时清空本表并重新填充\n\n【字段说明】\n元素描述: ≤20字\n状态: 当前状态描述\n交互选项格式: 英文逗号分隔，每选项≤4字，选项数≤3个\n示例: \"调查,使用\"",
      "initNode": "罗列当前场景内的元素，每个地点1-5条，包含环境特色元素。",
      "deleteNode": "触发条件: ①实体被销毁/拾取/无效化 ②离开当前次要地区 ③龙套升格为重要人物 ④单个地点超过5条时删除该地点最不相关的 ⑤全表超过30条时删除最不相关的",
      "updateNode": "触发条件: 状态改变或发现新细节（如果元素位置变化且新地点不在世界地图点表中，需先在世界地图点表中添加该地点）",
      "insertNode": "触发条件: 发现新实体、线索或环境特色元素（如果新实体的所在地点不在世界地图点表中，需先在世界地图点表中添加该地点）"
    },
    "content": [[null, "元素名称", "元素类型", "所在地点", "元素描述", "状态", "交互选项"]],
    "updateConfig": {
      "uiSentinel": -1,
      "contextDepth": -1,
      "updateFrequency": -1,
      "batchSize": -1,
      "skipFloors": -1
    },
    "exportConfig": {
      "enabled": false,
      "splitByRow": false,
      "entryName": "地图元素表",
      "entryType": "constant",
      "keywords": "",
      "preventRecursion": true,
      "injectionTemplate": ""
    },
    "orderNo": 2
  },
  "sheet_factions": {
    "uid": "sheet_factions",
    "name": "势力",
    "sourceData": {
      "note": "记录对剧情有实质影响的势力/组织/阵营。\n\n【准入规则】\n录入条件(OR): [与主线相关,与主角互动,拥有多成员或控制区域,会多次出现]\n禁入: [一次性提及的背景组织,无影响力的小团体]\n\n【约束】\n- 势力总数≤8条\n\n【字段说明】\n描述: ≤30字\n关系格式: \"{势力名称或角色名}:{关系词}\"\n- 同一对象的多个关系词用逗号分隔\n- 不同对象之间用分号分隔\n关系词: [同盟,敌对,中立,竞争,合作]\n示例: \"主角:敌对; 商会:同盟\" | \"主角:敌对,竞争; 商会:同盟\"\n据点: 势力总部或主要驻地",
      "initNode": "为已登场的重要势力插入条目。",
      "deleteNode": "触发条件: ①势力覆灭/解散/彻底退出剧情 ②超过8条时删除最不相关的",
      "updateNode": "触发条件: 描述/领袖/关系/据点发生变化",
      "insertNode": "触发条件: 剧情中出现新的重要势力"
    },
    "content": [[null, "名称", "描述", "领袖", "关系", "据点"]],
    "updateConfig": {
      "uiSentinel": -1,
      "contextDepth": -1,
      "updateFrequency": -1,
      "batchSize": -1,
      "skipFloors": -1
    },
    "exportConfig": {
      "enabled": false,
      "splitByRow": false,
      "entryName": "势力",
      "entryType": "constant",
      "keywords": "",
      "preventRecursion": true,
      "injectionTemplate": ""
    },
    "orderNo": 3
  },
  "sheet_protagonist": {
    "uid": "sheet_protagonist",
    "name": "主角信息",
    "sourceData": {
      "note": "记录主角的核心身份信息。此表必须保证有一行。禁止增删行\n\n【所在地点规则】\n所在地点必须等于世界地图点表中某个\"详细地点\"的值（精准匹配）\n仅填写地点名称本身，不包含层级结构\n正确: \"{{user}}公寓\" | \"御苑\"\n错误: \"东京-{{user}}公寓-卫生间\" | \"新宿区-御苑\"\n\n【位置同步规则】\n- 跨次要地区移动 → 同时更新全局数据表和本表\n- 同次要地区内移动 → 仅更新本表\n\n【字段格式】\n外貌特征: ≤30字，含身高体型等关键外观。普通服装在此描述，仅特殊装备入装备表。\n\n身份: 逗号分隔，≤20字\n示例: \"学生,魔法少女\"\n\n基础属性: \"{属性名}:{数值}\"，数值范围[0,100]\n示例: \"力量:35; 敏捷:50; 体质:52; 智力:35; 感知:40; 魅力:64\"\n\n特有属性: 角色最有特点的地方，包括性格特征、行为特点等。可以是正面、负面或中性的特点，不用太严肃，可以轻松有趣。\"{属性名}:{数值}\"，数值范围[0,100]\n示例: \"腹黑:45; 傲娇:60; 笨手笨脚:40\" | \"忠诚:80; 可爱:50; 天然呆:35\"\n注意: 能力类（如读心术、魔法）应记录在技能表中，而非本字段\n\n自身状态: 逗号分隔的状态标签\n状态类型: [生理,负面,正面,情绪,伤病]\n默认值: \"正常\"\n示例: \"正常\" | \"饥饿,疲劳\" | \"中毒,轻伤,恐惧\"\n约束: 无异常时填\"正常\"；有异常时去掉\"正常\"\n\n资源数据: \"{资源名}:{数值}\"，多组用分号分隔\n示例: \"金币:250; 行动点:3\"\n\n【属性标尺】\n0-10:能力缺失 | 11-39:弱项 | 40-59:平均 | 60-79:精英 | 80-89:极限 | 90-100:破格。基准: 数值呈指数增长(每+10分强度翻倍)；分布呈长尾状(绝大多数聚集在40-60，90+呈断崖式稀缺)，依角色[身份背景]生成，当前值受[当前状态]修正。如:重伤→0-10; 肾上腺素→80",
      "initNode": "插入主角唯一条目，设定各列数据。",
      "deleteNode": "禁止",
      "updateNode": "触发条件: 年龄、外貌、身份、状态、位置、属性、资源变化时（位置变化时，如果新地点不在世界地图点表中，需先在世界地图点表中添加该地点）",
      "insertNode": "禁止"
    },
    "content": [
      [null, "姓名", "性别", "年龄", "外貌特征", "身份", "自身状态", "所在地点", "基础属性", "特有属性", "资源数据"]
    ],
    "updateConfig": {
      "uiSentinel": -1,
      "contextDepth": -1,
      "updateFrequency": -1,
      "batchSize": -1,
      "skipFloors": -1
    },
    "exportConfig": {
      "enabled": false,
      "splitByRow": false,
      "entryName": "主角信息",
      "entryType": "constant",
      "keywords": "",
      "preventRecursion": true,
      "injectionTemplate": ""
    },
    "orderNo": 4
  },
  "sheet_important_npc": {
    "uid": "sheet_important_npc",
    "name": "重要人物表",
    "sourceData": {
      "note": "记录对剧情有重要影响的关键NPC。\n\n【准入规则】\n录入条件(OR): [与主线直接相关,与主角深度互动,拥有独特能力,会多次出现,有明确姓名]\n【禁入】: [一次性路人,龙套,纯功能性NPC]\n\n【行数约束】\n上限: 20条\n超限处理: 删除最久未互动且非核心剧情的NPC\n\n【禁止事项】\n不生成好感度、亲密度、信任值等任何量化情感数值\n\n【所在地点规则】\n所在地点必须等于世界地图点表中某个\"详细地点\"的值（精准匹配）\n仅填写地点名称本身，不包含层级结构\n正确: \"{{user}}公寓\" | \"御苑\"\n错误: \"东京-{{user}}公寓-卫生间\" | \"新宿区-御苑\"\n\n【在场状态规则】\n在场: 所在地点 = 全局数据表.当前详细地点\n离场: 所在地点 ≠ 全局数据表.当前详细地点\n次要地区切换时: 不在新地图点范围内的NPC → 在场状态设为\"离场\"\n\n【人际关系格式】\n格式: \"{角色名}:{关系词}\"\n- 同一角色的多个关系词用逗号分隔\n- 不同角色之间用分号分隔\n- 关系词字数≤4，不使用括号\n关系词示例: [恋人,挚友,师徒,主仆,仇人,队友]\n仅记录对剧情有重大影响的核心关系\n示例: \"主角:挚友; 艾莉丝:恋人\" | \"高松灯:同学,队友; 角色B:仇人\"\n\n【交互选项格式】\n格式: 英文逗号分隔，每选项≤4字\n内容: 当前可对该角色执行的主要交互动作\n示例: \"告别,邀约\"\n约束: 选项数≤3个，仅限在场状态的NPC填写，离场时留空\n\n【字段格式】\n外貌特征: ≤30字，含身高体型等关键外观。普通服装在此描述，仅特殊装备入装备表。\n身份: ≤20字，职业或头衔\n基础属性: \"{属性名}:{数值}\"，数值范围[0,100]\n特有属性: 角色特有能力或特点，\"{属性名}:{数值}\"，数值范围[0,100]\n示例: \"念动力:25; 点子:45; 轻飘飘:60\"",
      "initNode": "为符合准入条件的重要人物插入条目。",
      "deleteNode": "触发条件: ①超过20条时删除最久未互动且非核心的NPC ②NPC死亡且无后续剧情影响",
      "updateNode": "触发条件: ①外貌/身份/势力变化 ②属性变化 ③位置变化（位置变化时，如果新地点不在世界地图点表中，需先在世界地图点表中添加该地点） ④次要地区切换时更新在场状态 ⑤人际关系变化",
      "insertNode": "触发条件: 新重要人物登场"
    },
    "content": [
      [
        null,
        "姓名",
        "性别",
        "年龄",
        "外貌特征",
        "身份",
        "基础属性",
        "特有属性",
        "所在地点",
        "在场状态",
        "人际关系",
        "交互选项"
      ]
    ],
    "updateConfig": {
      "uiSentinel": -1,
      "contextDepth": -1,
      "updateFrequency": -1,
      "batchSize": -1,
      "skipFloors": -1
    },
    "exportConfig": {
      "enabled": false,
      "splitByRow": false,
      "entryName": "重要人物表",
      "entryType": "constant",
      "keywords": "",
      "preventRecursion": true,
      "injectionTemplate": ""
    },
    "orderNo": 5
  },
  "sheet_skills": {
    "uid": "sheet_skills",
    "name": "技能表",
    "sourceData": {
      "note": "记录主角获得的所有技能。包含天赋能力、后天法术、特殊技巧等。\n\n【准入规则】\n录入: [天赋能力,后天法术,特殊技巧,血脉能力,体质能力]\n- 天赋能力: 与生俱来的特殊能力，如读心术、元素亲和\n- 后天法术: 通过学习获得的魔法、法术等\n- 特殊技巧: 通过训练掌握的独特技巧\n- 血脉能力: 来自血脉传承的能力\n- 体质能力: 特殊体质带来的能力\n\n【约束】\n- 同一技能名称只能存在一行\n- 技能升级时更新现有行，禁止新增重复行\n- 技能总数≤15条\n- 技能名称不得与主角信息表中的基础属性、特有属性中的属性名**完全相同**（精确匹配）\n  * 检查方法: 读取主角信息表的\"基础属性\"和\"特有属性\"字段，提取所有属性名（冒号前的部分），确保技能名称不与这些属性名完全一致\n  * 允许情况: 技能名称可以包含这些属性名，只要不是完全相同即可\n  * 示例: \n    - 如果基础属性中有\"意志\"，则技能表中不能有名为\"意志\"的技能，但可以有\"意志坚定\"、\"强化意志\"等复合名称\n\n【字段说明】\n技能名称: ≤10字\n类型: [主动,被动]\n- 主动: 需主动触发的技能\n- 被动: 常驻生效的技能\n品质: [普通,优秀,稀有,史诗,传说,神话]\n熟练度: [0,100]的整数，必须用数值填入，不能使用\"熟练\"、\"精通\"等抽象词汇\n描述: ≤40字，含效果、代价、限制条件\n\n【熟练度标尺】\n0-10:初窥 | 11-39:入门 | 40-59:熟练 | 60-79:精通 | 80-89:大师 | 90-100:化境",
      "initNode": "根据设定添加主角初始技能。",
      "deleteNode": "触发条件: ①技能被剥夺或永久失效 ②发生上位替换 ③超过15条时删除熟练度最低且最久未使用的",
      "updateNode": "触发条件: ①熟练度变化 ②品质升级 ③描述内容变化",
      "insertNode": "触发条件: 主角获得新技能。插入前必须检查: ①技能名称不与本表中已有技能重复 ②技能名称不与主角信息表中的基础属性、特有属性中的属性名完全相同"
    },
    "content": [[null, "技能名称", "类型", "品质", "熟练度", "描述"]],
    "updateConfig": {
      "uiSentinel": -1,
      "contextDepth": -1,
      "updateFrequency": -1,
      "batchSize": -1,
      "skipFloors": -1
    },
    "exportConfig": {
      "enabled": false,
      "splitByRow": false,
      "entryName": "技能表",
      "entryType": "constant",
      "keywords": "",
      "preventRecursion": true,
      "injectionTemplate": ""
    },
    "orderNo": 8
  },
  "sheet_inventory": {
    "uid": "sheet_inventory",
    "name": "物品表",
    "sourceData": {
      "note": "记录主角拥有的非装备类物品。\n\n【分类规则】\n本表录入: [消耗品,材料,任务物品,道具]\n禁入: [装备类,货币(金/银/铜币,银子,灵石等),点数(行动点、积分]\n\n【堆叠规则】\n- 同名可堆叠物品获取时更新数量，禁止新增重复行\n- 任务物品或唯一物品数量固定为1\n\n【约束】\n- 物品总数≤20条\n\n【字段说明】\n物品名称: ≤10字\n类型: [消耗品,材料,任务物品,道具]\n- 消耗品: 使用后消失，如药水、卷轴、食物\n- 材料: 用于制作/合成/交易\n- 任务物品: 与任务相关，含钥匙、通行证、信物等\n- 道具: 可重复使用的功能性物品，如望远镜、绳索\n数量: 正整数\n品质: [普通,优秀,稀有,史诗,传说,神话]\n描述: ≤30字，含外观、效果、用途",
      "initNode": "根据设定添加主角初始携带物品。",
      "deleteNode": "触发条件: ①物品数量归零 ②完全消耗 ③全部丢弃或摧毁 ④超过20条时删除品质最低且最不相关的",
      "updateNode": "触发条件: ①数量变化 ②描述变化",
      "insertNode": "触发条件: 获得背包中没有的新物品"
    },
    "content": [[null, "物品名称", "类型", "数量", "品质", "描述"]],
    "updateConfig": {
      "uiSentinel": -1,
      "contextDepth": -1,
      "updateFrequency": -1,
      "batchSize": -1,
      "skipFloors": -1
    },
    "exportConfig": {
      "enabled": false,
      "splitByRow": false,
      "entryName": "物品表",
      "entryType": "constant",
      "keywords": "",
      "preventRecursion": true,
      "injectionTemplate": ""
    },
    "orderNo": 7
  },
  "sheet_equipment": {
    "uid": "sheet_equipment",
    "name": "装备表",
    "sourceData": {
      "note": "记录主角拥有的所有装备。\n\n【分类规则】\n本表录入: [武器,护具,衣物,饰品]\n禁入: [工具类(归入物品表\"道具\"),消耗品,材料]\n\n【拆分规则】\n- 每件装备独立一行，禁止合并\n- 错误: \"狐裘大衣与长裙\" → 正确: \"狐裘大衣\"\"长裙\"分两行\n- 错误: \"耳环和项链\" → 正确: \"耳环\"\"项链\"分两行\n【状态规则】\n已装备: 主角当前穿戴\n闲置: 卸下但仍拥有\n装备卸下 → 状态改为\"闲置\"，保留在本表\n装备丢弃 → 从本表删除\n\n【约束】\n- 装备总数≤15条\n- 装备名称≤6字，简洁命名\n\n【字段说明】\n装备名称: ≤6字，单件装备名称\n类型: [武器,护具,衣物,饰品]\n- 武器: 剑、枪、法杖、弓、匕首等\n- 护具: 盔甲、盾牌、头盔、护腕等\n- 衣物: 上衣、外套、裙子、裤子、鞋子、内衣等\n- 饰品: 戒指、项链、耳环、发饰、手表等\n品质: [普通,优秀,稀有,史诗,传说,神话]\n状态: [已装备,闲置]\n描述: ≤20字，含外观特征、效果、穿戴部位",
      "initNode": "根据设定添加主角初始装备。",
      "deleteNode": "触发条件: ①装备被丢弃或摧毁 ②超过15条时删除品质最低且状态为闲置的",
      "updateNode": "触发条件: ①状态变化 ②描述变化",
      "insertNode": "触发条件: 主角获得新装备"
    },
    "content": [[null, "装备名称", "类型", "品质", "状态", "描述"]],
    "updateConfig": {
      "uiSentinel": -1,
      "contextDepth": -1,
      "updateFrequency": -1,
      "batchSize": -1,
      "skipFloors": -1
    },
    "exportConfig": {
      "enabled": false,
      "splitByRow": false,
      "entryName": "装备表",
      "entryType": "constant",
      "keywords": "",
      "preventRecursion": true,
      "injectionTemplate": ""
    },
    "orderNo": 6
  },
  "sheet_summary": {
    "uid": "sheet_summary",
    "name": "总结表",
    "sourceData": {
      "note": "轮次日志，每轮交互后必须立即插入一条新记录。\n\n【编码索引生成步骤 - 必须严格遵循】\n步骤1: 读取总结表所有数据行的\"编码索引\"列\n步骤2: 提取所有编码索引中的数字部分（如AM001提取为1，AM002提取为2）\n步骤3: 找出最大数字（如果表为空则最大数字为0）\n步骤4: 下一个编码索引 = \"AM\" + (最大数字+1)，补零到3位\n步骤5: 示例计算：\n  - 表为空 → AM001\n  - 现有[AM001] → 最大数字1 → 下一个AM002\n  - 现有[AM001,AM002] → 最大数字2 → 下一个AM003\n\n【禁止行为】\n- 禁止自行猜测或随机生成\n- 禁止跳过数字（如从AM001直接跳到AM003）\n- 禁止重复使用已有编码\n\n格式: AM+XXX (AM001,AM002,AM003...)\n约束: 从AM001开始递增，不可跳号或重复\n与总体大纲表一一对应\n\n- 列2: 时间跨度 - 本轮事件发生的精确时间范围。格式: \"{起始时间} ~ {结束时间}\"\n时间格式: YYYY-MM-DD HH:MM\n- 列3: 纪要 - 对正文的客观纪实描述。【纪要规范】要求移除记录正文里的所有修辞、对话，以第三方的视角中立客观地记录所有正文中发生的事情，不加任何评论，内容不低于300字。如果上下文包含多轮交互，将其总结为一条记录。允许内容: [主要事件,涉及角色,位置变化,物品得失,状态变化,新发现,伏笔]\n禁止内容:[极端情绪,夸张,比喻,升华]\n【检查】检查本轮总结表及总体大纲表插入的条目中是否均带有一个相同的编码索引，且格式为`AM`+数字（如`AM001`），若任一方缺失或二者不一致，则需修正。保证总结表和总结大纲表从上到下每一行从AM001开始依次递增，中间没有中断。\n",
      "initNode": "插入AM001记录，记录初始场景和角色状态。",
      "deleteNode": "禁止。",
      "updateNode": "禁止。",
      "insertNode": "每轮交互结束后插入新记录，编码索引递增。"
    },
    "content": [[null, "编码索引", "时间跨度", "纪要"]],
    "updateConfig": {
      "uiSentinel": -1,
      "contextDepth": -1,
      "updateFrequency": -1,
      "batchSize": -1,
      "skipFloors": -1
    },
    "exportConfig": {
      "enabled": false,
      "splitByRow": false,
      "entryName": "总结表",
      "entryType": "constant",
      "keywords": "",
      "preventRecursion": true,
      "injectionTemplate": ""
    },
    "orderNo": 10
  },
  "sheet_outline": {
    "uid": "sheet_outline",
    "name": "总体大纲",
    "sourceData": {
      "note": "故事主干脉络表，对总结表纪要进行高度精炼。\n\n【编码索引生成步骤 - 必须严格遵循】\n步骤1: 读取总体大纲表所有数据行的\"编码索引\"列\n步骤2: 提取所有编码索引中的数字部分（如AM001提取为1，AM002提取为2）\n步骤3: 找出最大数字（如果表为空则最大数字为0）\n步骤4: 下一个编码索引 = \"AM\" + (最大数字+1)，补零到3位\n步骤5: 示例计算：\n  - 表为空 → AM001\n  - 现有[AM001] → 最大数字1 → 下一个AM002\n  - 现有[AM001,AM002] → 最大数字2 → 下一个AM003\n\n【禁止行为】\n- 禁止自行猜测或随机生成\n- 禁止跳过数字（如从AM001直接跳到AM003）\n- 禁止重复使用已有编码\n\n【约束】\n- 编码索引与总结表一一对应（必须与总结表中相同行的编码索引完全一致）\n- 大纲必须能从对应纪要中推导出来\n- 禁止包含纪要中没有的信息\n\n【大纲规范】\n字数: 20-80字\n允许内容: [核心事件(一句话),关键角色(仅主角和核心NPC),重要结果或影响]",
      "initNode": "插入AM001记录，一句话概括初始设定。",
      "deleteNode": "禁止。",
      "updateNode": "禁止。",
      "insertNode": "每轮交互结束后与总结表同步插入，从纪要中提炼核心事件。"
    },
    "content": [[null, "编码索引", "时间跨度", "大纲"]],
    "updateConfig": {
      "uiSentinel": -1,
      "contextDepth": -1,
      "updateFrequency": -1,
      "batchSize": -1,
      "skipFloors": -1
    },
    "exportConfig": {
      "enabled": false,
      "splitByRow": false,
      "entryName": "总体大纲",
      "entryType": "constant",
      "keywords": "",
      "preventRecursion": true,
      "injectionTemplate": ""
    },
    "orderNo": 11
  },
  "sheet_options": {
    "uid": "sheet_options",
    "name": "选项表",
    "sourceData": {
      "note": "基于当前剧情生成下一步行动建议。此表有且仅有一行，每轮完全覆写。禁止增删行\n\n【生成规范】\n视角: 第三人称\n格式: 行为描述 + 对白/心理(用引号包裹)\n篇幅: 每项约30字，至少2句话\n词汇: 客观、中性、无夸张修饰\n\n【四策略分支】\n- 选项一[逻辑最优]: 顺势推进，符合角色性格与情境的自然发展\n- 选项二[时间跳跃]: 快速推进至下一关键节点，必须明确跳跃时长\n- 选项三[引入变数]: 意料之外但仍合理的行动，引入新变数，令人眼前一亮\n- 选项四[亲密互动]: 推动主角与女性角色的亲密互动或增进感情的暧昧发展\n\n【约束】\n- 每轮必须根据最新剧情完全重写\n- 四个选项必须体现不同策略方向\n- 禁止与上轮选项重复",
      "initNode": "根据初始剧情生成四个初始选项。",
      "deleteNode": "禁止。",
      "updateNode": "每轮交互后必须重新生成新的选项，完全覆盖原有内容。",
      "insertNode": "禁止。"
    },
    "content": [[null, "选项一", "选项二", "选项三", "选项四"]],
    "updateConfig": {
      "uiSentinel": -1,
      "contextDepth": -1,
      "updateFrequency": -1,
      "batchSize": -1,
      "skipFloors": -1
    },
    "exportConfig": {
      "injectIntoWorldbook": false,
      "enabled": false
    },
    "orderNo": 12
  },
  "mate": {
    "type": "chatSheets",
    "version": 1,
    "updateConfigUiSentinel": -1
  },
  "sheet_quests": {
    "uid": "sheet_quests",
    "name": "任务表",
    "sourceData": {
      "note": "记录主角当前承接的所有任务。\n\n【准入规则】\n录入(OR): [主线任务,支线任务,悬赏通缉,委托请求]\n禁入: [单轮可完成动作,世界规则类信息,无明确目标的事项]\n判断标准: 有明确完成目标 AND 需跨越2轮以上交互\n\n【字段说明】\n类型: [主线,支线,日常]\n优先级: [紧急,重要,普通]\n目标: 一句话描述完成条件，≤50字\n进度: 必须是百分比数值格式，范围[0%,100%]\n格式: \"{数字}%\"，数字为0-100的整数\n正确示例: \"0%\" | \"50%\"\n错误示例: \"已完成一半\" | \"接近完成\" | \"50\" \n禁止: 任何描述性文字、中文数字、不带百分号或格式错误的数值\n状态: 必须从以下四个固定值中选择一个，禁止使用百分比或其他格式\n可选值: [进行中,已完成,已失败,已放弃]\n正确示例: \"进行中\" | \"已完成\" | \"已失败\" | \"已放弃\"\n错误示例: \"25%\" | \"50%\" | \"进行中50%\" | \"一半\" | 任何包含百分号的格式\n重要: 状态列和进度列是不同字段，状态列禁止填入百分比，百分比只能填入进度列",
      "initNode": "添加初始任务（如有）。",
      "deleteNode": "触发条件: 任务数量超过10条时\n清理顺序: 按「普通→重要→紧急」依次删除终态任务\n保护机制: 状态为进行中的任务禁止删除",
      "updateNode": "触发条件: ①进度变化 ②状态变化",
      "insertNode": "触发条件: 接受新任务"
    },
    "content": [[null, "名称", "类型", "优先级", "目标", "进度", "状态", "来源", "奖励"]],
    "updateConfig": {
      "uiSentinel": -1,
      "contextDepth": -1,
      "updateFrequency": -1,
      "batchSize": -1,
      "skipFloors": -1
    },
    "exportConfig": {
      "enabled": false,
      "splitByRow": false,
      "entryName": "任务表",
      "entryType": "constant",
      "keywords": "",
      "preventRecursion": true,
      "injectionTemplate": ""
    },
    "orderNo": 9
  }
}
